<!Doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=0.8, minimal-ui">
		<meta name="author" content="GEEKMAGIC">
		<meta name="theme-color" content="#36393E" />
		<link rel="stylesheet" href="css/style.css">
	</head>
	<body onload = "getData('/v.json');getData('/brt.json');getData('/delay.json');getData('/app.json');getData('/timebrt.json');getData('/theme_list.json');getNav();">
		<nav id="nav" style="width: 80%;margin: 0 auto;font-size: 25px;text-align: center;">
		</nav>
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div id="popup" class="popup"></div>
					<h1>1. Choose theme</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-12">
				(Please disable Auto switch if you want to switch manually.)<p>
					<input class="button-primary left btn-theme" type="button"  onclick="setTheme(1)" value="Weather Clock Today"/>
					<input class="button-primary left btn-theme" type="button"  onclick="setTheme(2)" value="Weather Forecast"/>
					<input class="button-primary left btn-theme" type="button"  onclick="setTheme(3)" value="Photo Album"/>
					<input class="button-primary left btn-theme" type="button"  onclick="setTheme(4)" value="Time Style 1"/>
					<input class="button-primary left btn-theme" type="button"  onclick="setTheme(5)" value="Time Style 2"/>
					<input class="button-primary left btn-theme" type="button"  onclick="setTheme(6)" value="Time Style 3"/>
					<input class="button-primary left btn-theme" type="button"  onclick="setTheme(7)" value="Simple Weather Clock"/>
				</div>
			</div>	
			<div class="row">
				<div class="col-12">
					<h1>2. Auto Switch Themes [Experimental]</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-12">
					<input type="checkbox" id="th1" value="1"/>1.Weather Clock Today<br />
					<input type="checkbox" id="th2" value="2"/>2.Weather Forecast<br />
					<input type="checkbox" id="th3" value="3"/>3.Photo Album<br />
					<input type="checkbox" id="th4" value="4"/>4.Time Style 1<br/>
					<input type="checkbox" id="th5" value="5"/>5.Time Style 2<br/>
					<input type="checkbox" id="th6" value="6"/>6.Time Style 3<br/>
					<input type="checkbox" id="th7" value="7"/>7.Simple Weather Clock<br/>
					<label>Enable:</label><input id= "sw_en" type="checkbox" value="1" onchange = "">
					<label>Interval(seconds):</label><input id= "theme_interval" type="text" style="width:60px" placeholder="10s"><p>					
					<button class="button-primary left" onclick="set_theme_list()">SAVE</button><p>
				</div>
			</div>	
			<div class="row">
				<div class="col-12">					
					<h1>3. Brightness</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-12">
					0<input type="range" style="width:300px" name="brt" id="brt" min="-10" max="100" onchange="set_brt()" value="50">100
				</div>
			</div>
			<div class="row">
				<div class="col-12">
					<h1>2. Night Mode [Recommended!]</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-12">Enable:
					<input type="checkbox" id="time_brt_en" name="time_brt_en" />
				</div>
				<div class="col-4">Start Time: <p>
					<select id="time1" onchange="" style="width:100px">
					  <option value="0">00:00</option>
					  <option value="1">01:00</option>
					  <option value="2">02:00</option>
					  <option value="3">03:00</option>
					  <option value="4">04:00</option>
					  <option value="5">05:00</option>
					  <option value="6">06:00</option>
					  <option value="7">07:00</option>
					  <option value="8">08:00</option>
					  <option value="9">09:00</option>
					  <option value="10">10:00</option>
					  <option value="11">11:00</option>
					  <option value="12">12:00</option>
					  <option value="13">13:00</option>
					  <option value="14">14:00</option>
					  <option value="15">15:00</option>
					  <option value="16">16:00</option>
					  <option value="17">17:00</option>
					  <option value="18">18:00</option>
					  <option value="19">19:00</option>
					  <option value="20">20:00</option>
					  <option value="21">21:00</option>
					  <option value="22" selected="selected">22:00</option>
					  <option value="23">23:00</option>  	
					</select>
					</div>
					<div class="col-4">End Time: <p>
					<select id="time2" onchange="" style="width:100px">
					  <option value="0">00:00</option>
					  <option value="1">01:00</option>
					  <option value="2">02:00</option>
					  <option value="3">03:00</option>
					  <option value="4">04:00</option>
					  <option value="5">05:00</option>
					  <option value="6">06:00</option>
					  <option value="7" selected="selected">07:00</option>
					  <option value="8">08:00</option>
					  <option value="9">09:00</option>
					  <option value="10">10:00</option>
					  <option value="11">11:00</option>
					  <option value="12">12:00</option>
					  <option value="13">13:00</option>
					  <option value="14">14:00</option>
					  <option value="15">15:00</option>
					  <option value="16">16:00</option>
					  <option value="17">17:00</option>
					  <option value="18">18:00</option>
					  <option value="19">19:00</option>
					  <option value="20">20:00</option>
					  <option value="21">21:00</option>
					  <option value="22">22:00</option>
					  <option value="23">23:00</option>	  	
					</select>
				</div>
			</div>
			<div class="row">
				<div class="col-12">Brightness at night: <p>
					0<input type="range" style="width:300px" name="time_brt" id="time_brt" min="-10" max="100" value="20">100
				</div>
			</div>		
			<div class="row">
				<div class="col-6">
					<button class="button-primary left" onclick="set_time_brt()">SAVE</button>
				</div>
			</div>		
			<div class="row">
				<div class="col-12">
					<h1>5. Factory Reset</h1>
					<label>The settings will be cleared, but the files you uploaded will not be affected.</label><p>
					<button class="red" onclick="set_reset()">RESET</button> 
				</div>
			</div>			
			<div class="row">
				<div class="col-12">
					<h1>6. Reboot</h1>
					<button class="red" onclick="set_reboot()">REBOOT</button> 
				</div>
			</div>
			<div class="row">
				<div class="col-12">
					<h1>7. Firmware update</h1>
					<button class="red"><a href="/update"  target="_blank">UPLOAD</a></button> 
				</div>
			</div>
			<div class="row">
				<div class="col-12">
 					<div id="model">
						Model:, Ver:
					</div>	
 					<div id="repo">
						<a href="https://github.com/GeekMagicClock/smalltv-ultra" target="_blank"> ->Check firmware updates on github</a>
					</div>						
 					<div id="copyright">
					</div>						
					<script src="js/settings.js"></script>
				</div>
			</div>
		</div>
		<script>	
			function set_time_brt(){
				var t1=getE("time1");
				var t2=getE("time2");
				var b2=getE("time_brt");
				var enable=getE("time_brt_en");
				if(enable.checked == true){
					en = 1;
				}else{
					en = 0;
				}
				var url = "/set?t1="+t1.value+"&t2="+t2.value+"&b1=50&b2="+b2.value+"&en="+en;
				send_http(url);
			}
			function setTheme(th){
				var url = "/set?theme="+th;
				send_http(url);
			}		
			function set_theme_list(){
				var arr = new Array();
				if(getE("th1").checked) arr[0] = 1;else arr[0] = 0;
				if(getE("th2").checked) arr[1] = 1;else arr[1] = 0;
				if(getE("th3").checked) arr[2] = 1;else arr[2] = 0;
				if(getE("th4").checked) arr[3] = 1;else arr[3] = 0;
				if(getE("th5").checked) arr[4] = 1;else arr[4] = 0;
				if(getE("th6").checked) arr[5] = 1;else arr[5] = 0;
				if(getE("th7").checked) arr[6] = 1;else arr[6] = 0;
				if(getE("sw_en").checked) sw = 1;
				else sw = 0;
				if(sw==1){
					var n=0;
					for(i=0;i<9;i++){
						if (arr[i] == 1) n++;
					}
					if(n<2){
						alert("At least please choose two themes!");
						return;
					}
				}
				var x = getE("theme_interval");
				var url = "/set?theme_list="+arr+"&sw_en="+sw+"&theme_interval="+x.value;
				send_http(url);
			}
			function set_reset(){
				var ret = confirm("Reset will erase all settings and reboot the device. Do you want to continue?");
				if(ret){
					var url = "/set?reset=1";
					send_http(url);
				}
			}
			function set_reboot(){
				var ret = confirm("Confirm reboot the device. Do you want to continue?");
				if(ret){
					var url = "/set?reboot=1";
					send_http(url);
				}
			}
			function set_brt(){
				var brt = getE('brt').value;
				var url = "/set?brt="+brt.replace(/ /g,"");
				send_http(url);	
			}
		</script>
	</body>
</html>